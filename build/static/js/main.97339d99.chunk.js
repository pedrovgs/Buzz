(this.webpackJsonpBuzz=this.webpackJsonpBuzz||[]).push([[0],{446:function(t,e,n){},447:function(t,e,n){},462:function(t,e,n){"use strict";n.r(e);var i=n(2),o=n.n(i),r=n(21),s=n.n(r),a=n(89),c=n.n(a),u=n(145),l=n.n(u)()({fontFamily:"Roboto, sans-serif",palette:{primary1Color:"#f2db2c",primary2Color:"#33658a",accent1Color:"#bbaa00",accent2Color:"#003b5d",textColor:"#000000",alternateTextColor:"#ffffff"}}),d=n(28),h=n(15),p=n(16),f=n(18),b=n(17),g=n(465),j="/logIn",v="/album",O="/camera",m="/preview",y="/detail",k="RESET_STATE";function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:k,state:t}}var S="SAVE_SESSION",w="LOG_OUT",x=function t(e,n){Object(h.a)(this,t),this.uid=e,this.email=n};function P(t){return function(e){e({type:w}),e(C()),t.replace("/")}}var T={user:void 0,authToken:void 0};function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object.assign({},t,{user:e.user});case w:return T;default:return t}}function I(t){return!!("undefined"!==typeof t.session)&&"undefined"!==typeof t.session.user}function L(t){return"undefined"!==typeof t.session&&"undefined"!==typeof t.session.user?t.session.user.uid:void 0}var D=n.p+"static/media/logo.e918f3e3.svg",U=n(4),_="medium",B={width:"40%",height:"40%",padding:"12px"},F={width:"25%",height:"25%",padding:"8px"},A=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this.getComponentStyle();return Object(U.jsx)("img",{id:"logo",src:D,alt:"Buzz logo",style:t})}},{key:"getComponentStyle",value:function(){this.props.size;return this.props.size===_?F:B}}]),n}(o.a.Component),R=n(26);var z={isRunningTests:function(){var t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAFF1HzzpgX6fNzysOQqKbNfm4K7WtLT0o",REACT_APP_FIREBASE_AUTH_DOMAIN:"buzz-349b0.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://buzz-349b0.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"buzz-349b0",REACT_APP_FIREBASE_STORAGE_BUCKET:"buzz-349b0.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"123240264331",REACT_APP_ALBUM_NUMBER_OF_COLUMNS:"3"}).REACT_APP_RUNNING_TESTS;return!!t&&!0===Boolean(t)}},N=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){if(this.props.hidden)return null;var t=z.isRunningTests()?"determinate":"indeterminate";return Object(U.jsx)(R.c,{id:"progress",mode:t,size:100,value:55})}}]),n}(o.a.Component);N.defaultProps={hidden:!1};var M=N,W=n(30),V=n(222);function H(t){return z.isRunningTests()?t:Object(U.jsx)(V.CSSTransitionGroup,{transitionName:"fade",transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300,children:t})}var G=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).state={loading:!1},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.showLoadingTimer=setTimeout((function(){return t.showLoading()}),1200)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.showLoadingTimer),clearTimeout(this.hideLoadingTimer)}},{key:"render",value:function(){return Object(U.jsx)(W.Row,{center:"xs",middle:"xs",className:"fullWidth",children:Object(U.jsx)(W.Col,{children:H(this.getMainComponent())})})}},{key:"getMainComponent",value:function(){return this.state.loading?(this.scheduleHideLoading(),Object(U.jsx)(M,{})):Object(U.jsx)(A,{size:"big"})}},{key:"scheduleHideLoading",value:function(){var t=this;this.hideLoadingTimer=setTimeout((function(){return t.openNextScreen()}),1900)}},{key:"openNextScreen",value:function(){return!1===this.props.isUserLoggedIn?this.props.history.push(j):this.props.history.push(v)}},{key:"showLoading",value:function(){this.setState({loading:!0})}}]),n}(o.a.Component);var K=Object(g.a)(Object(d.b)((function(t){return{isUserLoggedIn:I(t)}}))(G)),X=n(24),Y=n(37);var q={signOut:function(){return Y.a.auth().signOut()},signIn:function(t,e){return Y.a.auth().signInWithEmailAndPassword(t,e)},signUp:function(t,e){return Y.a.auth().createUserWithEmailAndPassword(t,e)},currentUser:function(){return Y.a.auth().currentUser}},J={isLogInInProgress:!1,email:void 0,password:void 0,errorMessage:void 0},Q={padding:"6px"},Z={margin:12},$=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).state=J,i.onEmailFieldChanged=i.onEmailFieldChanged.bind(Object(X.a)(i)),i.onPasswordFieldChanged=i.onPasswordFieldChanged.bind(Object(X.a)(i)),i.onSubmit=i.onSubmit.bind(Object(X.a)(i)),i}return Object(p.a)(n,[{key:"render",value:function(){var t=this.state.isLogInInProgress;return Object(U.jsxs)("form",{style:Q,id:"signInForm",children:[Object(U.jsx)("div",{children:Object(U.jsx)(R.j,{id:"emailField",floatingLabelText:"Email",disabled:t,onChange:this.onEmailFieldChanged,errorText:this.state.errorMessage})}),Object(U.jsx)("div",{children:Object(U.jsx)(R.j,{id:"passwordField",type:"password",floatingLabelText:"Password",disabled:t,onChange:this.onPasswordFieldChanged})}),Object(U.jsxs)("div",{children:[Object(U.jsx)(R.i,{id:"signUpButton",label:"Sign Up",style:Z,disabled:t,onClick:this.onSubmit}),Object(U.jsx)(R.i,{id:"signInButton",label:"Sign In",style:Z,disabled:t,onClick:this.onSubmit})]})]})}},{key:"onEmailFieldChanged",value:function(t,e){this.setState((function(){return{email:e}}))}},{key:"onPasswordFieldChanged",value:function(t,e){this.setState((function(){return{password:e}}))}},{key:"onSubmit",value:function(t){return t&&t.preventDefault(),this.setStateToLogInInProgress(!0),this.signInOrSignUpIfTheUserAlreadyExists()}},{key:"signInOrSignUpIfTheUserAlreadyExists",value:function(){var t=this,e=this.state.email,n=this.state.password;return q.signOut().then((function(){return q.signIn(e,n).then((function(){t.notifyLogInSuccess()})).catch((function(i){var o=i.code;"auth/user-not-found"===o?t.createAccount(e,n):o&&t.setStateToError(i.message),t.setStateToLogInInProgress(!1)}))}))}},{key:"createAccount",value:function(t,e){var n=this;q.signUp(t,e).then((function(){n.notifyLogInSuccess()})).catch((function(t){var e=t.message;e?n.setStateToError(e):n.notifyLogInSuccess(),n.setStateToLogInInProgress(!1)}))}},{key:"notifyLogInSuccess",value:function(){var t=q.currentUser();t&&this.props.onUserLoggedIn(new x(t.uid,t.email))}},{key:"setStateToLogInInProgress",value:function(t){this.setState((function(){return{isLogInInProgress:t}}))}},{key:"setStateToError",value:function(t){this.setState((function(){return{errorMessage:t}}))}}]),n}(o.a.Component),tt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.goToAlbumScreenIfTheUserIsStillLoggedIn()}},{key:"componentDidUpdate",value:function(){this.goToAlbumScreenIfTheUserIsStillLoggedIn()}},{key:"render",value:function(){return Object(U.jsx)(W.Grid,{className:"fullWidth",children:Object(U.jsx)(W.Row,{center:"xs",middle:"xs",className:"fullWidth",children:H(Object(U.jsx)(W.Col,{children:Object(U.jsxs)(R.b,{children:[Object(U.jsx)(A,{size:_}),Object(U.jsx)($,{onUserLoggedIn:this.props.onUserLoggedIn})]})}))})})}},{key:"goToAlbumScreenIfTheUserIsStillLoggedIn",value:function(){!0===this.props.isUserLoggedIn&&this.props.history.push(v)}}]),n}(i.Component),et=Object(g.a)(Object(d.b)((function(t){return{isUserLoggedIn:I(t)}}),(function(t){return{onUserLoggedIn:function(e){t(function(t){return{type:S,user:t}}(e))},onError:function(){t(P())}}}))(tt)),nt=n(467),it=n(466),ot={position:"fixed",right:"0",bottom:"0",margin:"20px"},rt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(U.jsx)(R.f,{style:ot,onClick:this.props.onClick,disabled:this.props.disabled,children:this.props.children})}}]),n}(o.a.Component),st=n(225),at=n.n(st),ct=n(226),ut=n.n(ct),lt={textTransform:"lowercase"},dt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).onLeftIconButtonClick=i.onLeftIconButtonClick.bind(Object(X.a)(i)),i.onLogOutButtonClick=i.onLogOutButtonClick.bind(Object(X.a)(i)),i.closeDialog=i.closeDialog.bind(Object(X.a)(i)),i.handleLogOutOkButtonClick=i.handleLogOutOkButtonClick.bind(Object(X.a)(i)),i.state={showLogOutDialog:!1},i}return Object(p.a)(n,[{key:"render",value:function(){var t=[Object(U.jsx)(R.e,{label:"Cancel",primary:!0,onClick:this.closeDialog},"Cancel button"),Object(U.jsx)(R.e,{label:"Ok",primary:!0,keyboardFocused:!0,onClick:this.handleLogOutOkButtonClick},"Ok button")];return Object(U.jsxs)("div",{children:[Object(U.jsx)(R.d,{title:"Log Out",actions:t,modal:!1,open:this.state.showLogOutDialog,children:"Would you like to close your session?"}),Object(U.jsx)(R.a,{title:this.props.title,onLeftIconButtonClick:this.onLeftIconButtonClick,iconElementLeft:this.leftIcon(),showMenuIconButton:this.props.showBackButton||!1,iconElementRight:Object(U.jsx)(R.e,{label:this.props.userLoggedInEmail||" ",onClick:this.onLogOutButtonClick,labelStyle:lt})})]})}},{key:"leftIcon",value:function(){return this.props.showBackButton?Object(U.jsx)(R.h,{children:Object(U.jsx)(ut.a,{})}):null}},{key:"onLeftIconButtonClick",value:function(){!0===this.props.showBackButton&&this.props.history.goBack()}},{key:"onLogOutButtonClick",value:function(){this.setState({showLogOutDialog:!0})}},{key:"closeDialog",value:function(){this.setState({showLogOutDialog:!1})}},{key:"handleLogOutOkButtonClick",value:function(){this.closeDialog(),this.props.handleLogOutOkButtonClick(this.props.history)}}]),n}(o.a.Component),ht=Object(g.a)(Object(d.b)((function(t){return t.session&&t.session.user?{userLoggedInEmail:t.session.user.email}:{}}),(function(t){return{handleLogOutOkButtonClick:function(e){t(P(e))}}}))(dt)),pt=n(35),ft=n.n(pt);function bt(t,e){var n=Y.a.storage().ref(),i=ft()().unix(),o="jpg",r=n.child("".concat(t,"/").concat(i,".").concat(o));return r.putString(e,"data_url").then((function(){return r.getDownloadURL().then((function(e){var n=e.substring(0,e.indexOf(o)+o.length)+"?alt=media";return function(t,e){var n=gt(t),i=Y.a.database().ref(n),o=i.child(n).push().key,r={};r["/pictures/"+o]={url:e,createdAt:ft()().valueOf()},i.update(r)}(t,n),n}))}))}function gt(t){return t.split(".").join("")}var jt="FETCH_PICTURES",vt="PICTURES_LOADED",Ot="SELECT_PICTURE",mt="DELETE_PICTURE",yt="DELETING_PICTURE";function kt(){return function(t,e){if(!z.isRunningTests()){var n=L(e());n&&(t({type:jt,folder:n}),(i=n,Y.a.database().ref("".concat(gt(i),"/pictures/")).orderByChild("createdAt").once("value").then((function(t){var e=t.val();return e?Object.keys(e).map((function(t){var n=e[t];return n.id=t,n})).reverse():[]}))).then((function(e){t({type:vt,pictures:e})})))}var i}}function Ct(t){return{type:Ot,pictureSelected:t}}function St(t){return function(e,n){var i,o,r=L(n());e({type:yt}),(i=r,o=t.id,Y.a.database().ref("".concat(gt(i),"/pictures/")).child(o).remove()).then((function(){e({type:mt,pictureToDelete:t})}))}}var wt=n(90),xt=n.n(wt);function Pt(t){var e=new Date(t);return ft()(e).format("MMM Do YYYY")}var Tt=n(227),Et=n.n(Tt),It={contentStyle:{height:"30%",width:"90%",margin:"auto"},icon:{height:"200px",width:"200px",color:"#828282"},text:{color:"#828282",fontSize:"110%"}},Lt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(U.jsxs)("div",{style:It.contentStyle,children:[Object(U.jsx)(Et.a,{style:It.icon}),Object(U.jsxs)("p",{style:It.text,children:["Don\xb4t be shy"," ",Object(U.jsx)("span",{role:"img","aria-label":"Smiley",children:"\ud83d\ude03"}),"\ufe0f"]}),Object(U.jsxs)("p",{style:It.text,children:["Take your first picture tapping on the bottom right button"," ",Object(U.jsx)("span",{role:"img","aria-label":"Camera",children:"\ud83d\udcf8"})]})]})}}]),n}(o.a.Component),Dt=n(228),Ut={gridList:{width:"100%",height:"100%",overflowY:"auto"},img:{minWidth:"100%",minHeight:"100%",transform:"translate(-50%, -50%)",position:"relative",left:"50%",top:"50%"}},_t=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).onFloatingButtonClick=i.onFloatingButtonClick.bind(Object(X.a)(i)),i.onPictureClick=i.onPictureClick.bind(Object(X.a)(i)),i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchPictures()}},{key:"render",value:function(){var t=this.props.fetchingPictures||0===this.props.pictures.length?{height:"100%"}:{};return Object(U.jsxs)("div",{style:t,children:[Object(U.jsx)(ht,{title:"\ud83d\uddbc Your album"}),this.renderMainComponent(),Object(U.jsx)(rt,{onClick:this.onFloatingButtonClick,children:Object(U.jsx)(at.a,{})})]})}},{key:"renderMainComponent",value:function(){var t=this;return this.props.fetchingPictures?Object(U.jsx)(W.Row,{center:"xs",middle:"xs",className:"fullWidth",children:Object(U.jsx)(W.Col,{xs:!0,children:Object(U.jsx)(M,{})})}):this.props.pictures.length>0?Object(U.jsx)("div",{children:Object(U.jsx)(xt.a,{cols:this.props.numberOfColumns,cellHeight:200,style:Ut.gridList,children:this.props.pictures.map((function(e){var n=e.url,i=Pt(e.createdAt);return Object(U.jsx)(R.g,{title:i,children:Object(U.jsx)(Dt.LazyLoadImage,{onClick:function(){t.onPictureClick(e)},style:Ut.img,src:n,alt:i})},n)}))})}):Object(U.jsx)(W.Row,{center:"xs",middle:"xs",className:"fullWidth",children:Object(U.jsx)(W.Col,{xs:!0,children:Object(U.jsx)(Lt,{})})})}},{key:"onFloatingButtonClick",value:function(){this.props.history.push(O)}},{key:"onPictureClick",value:function(t){this.props.onPictureClick(t),this.props.history.push(y)}}]),n}(i.Component);_t.defaultProps={fetchingPictures:!0,numberOfColumns:Number("3")};var Bt=Object(g.a)(Object(d.b)((function(t){var e=t.album,n=t.session;return e&&n&&n.user?{fetchingPictures:e.fetchingPictures||!1,pictures:e.pictures||[],sendPictureEmail:n.user.email}:{fetchingPictures:!1,pictures:[]}}),(function(t){return{fetchPictures:function(){t(kt())},onPictureClick:function(e){t(Ct(e))}}}))(_t)),Ft=(n(446),n(447),n(229)),At=n.n(Ft),Rt={position:"fixed",top:"50%",left:"50%",height:"100%",zIndex:"-100",transform:"translateX(-50%) translateY(-50%) scaleX(-1)"},zt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.getVideoTag();navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;var n={audio:!1,video:{width:{ideal:1280},height:{ideal:1024},facingMode:"environment"}};navigator.mediaDevices.enumerateDevices().then((function(t){for(var e=0;e!==t.length;++e)"videoinput"===t[e].kind&&(n.deviceId={exact:t[e].deviceId})})),navigator.mediaDevices.getUserMedia(n).then((function(n){t.localStream=n,e.srcObject=n}))}},{key:"componentWillUnmount",value:function(){var t=this.localStream;if(t){t.getTracks()[0].stop();var e=this.getVideoTag();e.pause(),e.srcObject=null}}},{key:"render",value:function(){return Object(U.jsx)("video",{autoPlay:"true",id:"video",style:Rt})}},{key:"getVideoTag",value:function(){return document.querySelector("#video")}},{key:"takePicture",value:function(){var t=this.getVideoTag(),e=document.createElement("canvas");e.height=t.videoHeight,e.width=t.videoWidth;var n=e.getContext("2d");return n.scale(-1,1),n.drawImage(t,0,0,-1*e.width,e.height),e.toDataURL()}}]),n}(o.a.Component),Nt={position:"absolute",height:"100%",width:"100%",background:"rgba(0, 0, 0, 0.5)"},Mt={fontSize:"100pt",color:"#FFFFFF",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"},Wt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).state=i.initialState(),i}return Object(p.a)(n,[{key:"initialState",value:function(){return{countdownValue:this.props.countdownSeconds,countdownFinished:!1}}},{key:"componentDidUpdate",value:function(t){var e=this;this.wasTheStartDateConfiguredRecently(t)&&this.setState(this.initialState()),!0!==this.state.countdownFinished&&(this.shouldStopTheCountdown(t)?(this.setState({countdownValue:0,countdownFinished:!0}),this.props.onCountdownFinished()):(this.wasTheStartDateConfiguredRecently(t)&&this.updateCounterValue(),this.didStartTheCountdown()&&(this.countdownTimer=setTimeout((function(){e.updateCounterValue()}),1e3))))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.countdownTimer)}},{key:"render",value:function(){return this.didStartTheCountdown()?Object(U.jsx)("div",{style:Nt,children:Object(U.jsx)("span",{style:Mt,children:this.state.countdownValue})}):null}},{key:"didStartTheCountdown",value:function(){return"undefined"!==typeof this.props.countdownStartDate&&!1===this.state.countdownFinished}},{key:"wasTheStartDateConfiguredRecently",value:function(t){return"undefined"===typeof t.countdownStartDate&&"undefined"!==typeof this.props.countdownStartDate}},{key:"updateCounterValue",value:function(){if(this.props.countdownStartDate){var t=ft()(),e=this.props.countdownStartDate.diff(t,"seconds"),n=this.props.countdownSeconds-Math.abs(e);this.setState({countdownValue:n})}}},{key:"shouldStopTheCountdown",value:function(t){return this.state.countdownValue<=0&&!this.wasTheStartDateConfiguredRecently(t)&&!1===this.state.countdownFinished}}]),n}(o.a.Component),Vt="SAVE_TENTATIVE_PICTURE",Ht="UPLOAD_PICTURE",Gt="PICTURE_UPLOADED";function Kt(t){return function(e,n){e({type:Ht,base64Picture:t}),bt(L(n()),t).then((function(t){e(function(t){return{type:Gt,pictureUrl:t}}(t))}))}}var Xt={height:"100%",width:"100%"},Yt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).state={width:0,height:0},i.onFloatingButtonClick=i.onFloatingButtonClick.bind(Object(X.a)(i)),i.didStartTheCountdown=i.didStartTheCountdown.bind(Object(X.a)(i)),i.didFinishCountdown=i.didFinishCountdown.bind(Object(X.a)(i)),i.webcamReference=o.a.createRef(),i}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(t,e){e.tentativePicture!==this.state.tentativePicture&&this.props.history.push(m)}},{key:"render",value:function(){return H(Object(U.jsxs)("div",{style:Xt,children:[Object(U.jsx)(ht,{title:"\ud83d\udcf8 Cheeese!",showBackButton:!0}),Object(U.jsxs)("div",{children:[Object(U.jsx)(zt,{ref:this.webcamReference}),Object(U.jsx)(Wt,{countdownSeconds:5,countdownStartDate:this.state.startCountdownDate,onCountdownFinished:this.didFinishCountdown}),Object(U.jsx)(rt,{onClick:this.onFloatingButtonClick,disabled:this.didStartTheCountdown(),children:Object(U.jsx)(At.a,{})})]})]}))}},{key:"onFloatingButtonClick",value:function(){this.setState({startCountdownDate:ft()()})}},{key:"didStartTheCountdown",value:function(){return"undefined"!==typeof this.state.startCountdownDate}},{key:"didFinishCountdown",value:function(){this.setState({startCountdownDate:void 0});var t=this.webcamReference.current.takePicture();this.props.onPictureTaken(t),this.props.history.push(m)}}]),n}(i.Component),qt=Object(g.a)(Object(d.b)((function(t){var e=t.camera;return e?{tentativePicture:e.tentativePicture}:{}}),(function(t){return{onPictureTaken:function(e){t({type:Vt,base64Picture:e})}}}))(Yt)),Jt={height:"100%"},Qt={position:"absolute",top:"50%",left:"50%",height:"100%",transform:"translateX(-50%) translateY(-50%)"},Zt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setState({mountDate:ft()(),previewFinished:!1})}},{key:"componentDidUpdate",value:function(){var t=this;if(this.props.pictureUploaded&&!1===this.state.previewFinished){this.setState({previewFinished:!0});var e=3-ft()().diff(this.state.mountDate),n=Math.max(e,0);setTimeout((function(){t.props.history.goBack()}),n)}else!1===this.state.previewFinished&&this.uploadPicture()}},{key:"render",value:function(){var t=this.props.tentativePicture||this.props.pictureUploaded;return H(Object(U.jsxs)("div",{style:Jt,children:[Object(U.jsx)("div",{children:Object(U.jsx)(ht,{title:"\ud83d\ude03 Uploading your picture"})}),Object(U.jsx)(W.Row,{center:"xs",middle:"xs",className:"fullWidth",children:Object(U.jsx)(W.Col,{xs:!0,children:Object(U.jsxs)("div",{children:[Object(U.jsx)("img",{alt:"Preview",style:Qt,src:t}),Object(U.jsx)(M,{})]})})})]}))}},{key:"uploadPicture",value:function(){var t=this.props.tentativePicture;t&&this.props.uploadPicture(t)}}]),n}(o.a.Component),$t=Object(g.a)(Object(d.b)((function(t){var e=t.camera;return e?{tentativePicture:e.tentativePicture,pictureUploaded:e.lastPictureUploaded}:{}}),(function(t){return{uploadPicture:function(e){t(Kt(e))}}}))(Zt)),te=(n(448),n(449),n(230)),ee=n.n(te),ne=n(231),ie=n.n(ne),oe=(n(450),function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).updateDimensions=i.updateDimensions.bind(Object(X.a)(i)),i.onNewPictureSelected=i.onNewPictureSelected.bind(Object(X.a)(i)),i.onFloatingButtonClick=i.onFloatingButtonClick.bind(Object(X.a)(i)),i}return Object(p.a)(n,[{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"UNSAFE_componentWillMount",value:function(){this.updateDimensions()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(){0===this.props.pictures.length&&this.props.history.goBack()}},{key:"render",value:function(){var t=this,e=this.props.selectedPicture?Pt(this.props.selectedPicture.createdAt):"",n=this.props.pictures.map((function(t){return{original:t.url}}));return Object(U.jsxs)("div",{children:[Object(U.jsx)(ht,{title:e,showBackButton:!0}),Object(U.jsx)(ie.a,{items:n,lazyLoad:!0,showFullscreenButton:!1,autoPlay:!0,showThumbnails:!1,slideInterval:6e4,onSlide:function(e){return t.onNewPictureSelected(e)}}),Object(U.jsx)(rt,{disabled:this.props.deletingPicture,onClick:this.onFloatingButtonClick,children:Object(U.jsx)(ee.a,{})})]})}},{key:"settings",value:function(){var t=this.props.selectedPicture;return{dots:!0,infinite:!0,lazyLoad:!0,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:6e4,initialSlide:t?this.props.pictures.indexOf(t):0}}},{key:"onNewPictureSelected",value:function(t){var e=this.props.pictures[t];this.props.onPictureSelected(e)}},{key:"onFloatingButtonClick",value:function(){var t=this.props.selectedPicture;t&&this.props.onPictureDeleted(t)}}]),n}(o.a.Component));oe.defaultProps={pictures:[],deletingPicture:!1};var re=Object(g.a)(Object(d.b)((function(t){var e=t.album;return{pictures:e.pictures,selectedPicture:e.selectedPicture,deletingPicture:e.deletingPicture}}),(function(t){return{onPictureSelected:function(e){t(Ct(e))},onPictureDeleted:function(e){t(St(e))}}}))(oe)),se={height:"100%"},ae=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(U.jsx)(nt.a,{children:Object(U.jsxs)("div",{style:se,children:[Object(U.jsx)(it.a,{exact:!0,path:"/",component:K}),Object(U.jsx)(it.a,{exact:!0,path:j,component:et}),Object(U.jsx)(it.a,{exact:!0,path:v,component:Bt}),Object(U.jsx)(it.a,{exact:!0,path:O,component:qt}),Object(U.jsx)(it.a,{exact:!0,path:m,component:$t}),Object(U.jsx)(it.a,{exact:!0,path:y,component:re})]})})}}]),n}(i.Component),ce=n(75),ue=n(76),le=n.n(ue),de=n(148),he=n(92),pe=n.n(he),fe="state";function be(){return(be=Object(de.a)(le.a.mark((function t(){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return t(pe.a.get(fe)||{})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ge=n(232),je=n(233),ve={tentativePicture:void 0,uploadingPicture:!1,lastPictureUploaded:void 0};function Oe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Vt:return Object.assign({},t,{tentativePicture:e.base64Picture,lastPictureUploaded:void 0});case Ht:return Object.assign({},t,{uploadingPicture:!0});case Gt:return Object.assign({},t,{uploadingPicture:!1,tentativePicture:void 0,lastPictureUploaded:e.pictureUrl});default:return t}}var me={fetchingPictures:!1,deletingPicture:!1,pictures:[]};function ye(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case jt:return Object.assign({},t,{fetchingPictures:!0});case vt:return Object.assign({},t,{fetchingPictures:!1,pictures:e.pictures});case Ot:return Object.assign({},t,{selectedPicture:e.pictureSelected});case yt:return Object.assign({},t,{deletingPicture:!0});case mt:return Object.assign({},t,{deletingPicture:!1,selectedPicture:ke(t.pictures,e.pictureToDelete),pictures:t.pictures.filter((function(t){return t.id!==e.pictureToDelete.id}))});default:return t}}function ke(t,e){if(1!==t.length){var n=Math.max(0,t.indexOf(e)-1);return t[n]}}var Ce=Object(ce.c)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return e.state;default:return{session:E(t.session,e),camera:Oe(t.camera,e),album:ye(t.album,e)}}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(ce.a)(je.a));z.isRunningTests()||Y.a.initializeApp({apiKey:"AIzaSyAFF1HzzpgX6fNzysOQqKbNfm4K7WtLT0o",authDomain:"buzz-349b0.firebaseapp.com",databaseURL:"https://buzz-349b0.firebaseio.com",projectId:"buzz-349b0",storageBucket:"buzz-349b0.appspot.com",messagingSenderId:"123240264331"}),function(t){if(!z.isRunningTests())(function(t){return function(){return be.apply(this,arguments)}().then((function(e){t.dispatch(C(e))}))})(t).then((function(){!function(t){var e=function(){var t,e=Ce.getState();t=e,new Promise((function(e){return pe.a.set(fe,t),e(t)}))},n=1e3;t.subscribe(Object(ge.throttle)(e),n)}(t)}))}(Ce);var Se=Ce,we=n(234),xe=n.n(we);z.isRunningTests()&&(window.store=Se),xe.a.load({google:{families:["Roboto:400","sans-serif"]}}),s.a.render(Object(U.jsx)(d.a,{store:Se,children:Object(U.jsx)(c.a,{muiTheme:l,children:Object(U.jsx)(ae,{})})}),document.getElementById("root"))}},[[462,1,2]]]);
//# sourceMappingURL=main.97339d99.chunk.js.map